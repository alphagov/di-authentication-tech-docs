---
title: Generate a key pair
weight: 5.01
last_reviewed_on: 2021-10-14
review_in: 6 months
---

# Generate a key pair

You’ll need to provide a public key when registering your service.

You can generate a key pair (a public key and a corresponding private key) using [OpenSSL](https://www.openssl.org/).

You’ll need your private key when:

* you’re registering your service to use GOV.UK One Login environments, such as integration or production
* you request the token using the private key authentication mechanism on the `/token` endpoint

<%= warning_text('Once you’ve generated your private key, you must store the key in a secure location, such as a file vault, and you must not share the private key.') %>

Run the following on your command line to generate your key pair:

```
openssl genpkey -algorithm RSA -out private_key.pem -pkeyopt rsa_keygen_bits:2048

openssl rsa -pubout -in private_key.pem -out public_key.pem
```

You have now generated your key pair, which will appear on your machine as 2 files:

* `public_key.pem` - this is your public key, which you should share with GOV.UK One Login
* `private_key.pem` - this is your private key, which you should store securely and not share

Once you have generated your key pair, you can [choose which user attributes your service can request][integrate.choose-user-attributes].

## Publishing your public key(s) via a JWKS endpoint

As an alternative to using a single fixed key pair, you may have multiple and publish the set of one or more public keys at an endpoint in the form of a [JWKS](https://auth0.com/docs/secure/tokens/json-web-tokens/json-web-key-sets). This will enable you to do key rotations without having to directly contact us to make a configurtion update, avoiding potential downtime. In this case you must provide the URL that GOV.UK One Login is to call to `GET` the JWKS.

Some considerations:

* We will cache public keys returned from this endpoint on `kid` (Key ID) for up to 24 hours. Therefore if you need to immediately retract a key you should contact us for support and not simply remove the key from your endpoint.
* If the endpoint does not respond with to a `GET` request with a `HTTP 200 (OK)` withing 5 seconds One Login may consider this to be an error, rendering the service inaccessable.
* If you use a JWKS endpoint, you must include a unique `kid` parameter in each key (`JWK`) entry. The `kid` parameter for the key used to sign a `JWS` must then be included in its header.

<%= partial "partials/links" %>
